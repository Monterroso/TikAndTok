# Application Architecture Overview

This document outlines the overall structure and design of our D&D TikTok clone application. It is intended to provide a clear view of the project organization, the responsibilities of each component, and the architectural patterns we follow. This overview will help everyone—developers and AI assistants alike—understand how the project is organized.

## Project Purpose

Our D&D TikTok clone is a Flutter application using Firebase as its backend. It centers on the consumer journey for tabletop roleplaying game enthusiasts. The app allows users to browse, watch, and interact with videos related to Dungeons & Dragons and other tabletop RPGs.

## Directory Structure

Below is a visual breakdown of the project directories and key files. This structure promotes modularity, reusability, and clear separation of concerns: 

TikAndTok/
├── android/ // Native Android code & configuration
├── ios/ // Native iOS code & configuration (includes GoogleService-Info.plist)
├── lib/
│ ├── models/ // Data models for the application
│ │ ├── user.dart // User model for authentication and profile information
│ │ ├── video.dart // Video model including metadata (e.g., tags, categories)
│ │ └── collection.dart // User-defined collections (for bookmarked or grouped videos)
│ ├── screens/ // Entire UI pages of the application
│ │ ├── login_screen.dart // Handles user authentication (login/sign-up)
│ │ ├── home_screen.dart // (Deprecated) Previous home screen, replaced by video_viewing_screen
│ │ ├── video_viewing_screen.dart // Main video viewing screen with FrontPage widget
│ │ ├── saved_videos_screen.dart // Lists videos saved/bookmarked by the user
│ │ ├── filter_screen.dart // Allows filtering of videos by various criteria
│ │ └── collections_screen.dart // UI for managing user-created collections
│ ├── services/ // Service layer handling business logic and Firebase interactions
│ │ ├── auth_service.dart // Authentication operations (email/password, Google sign-in, password reset, etc.)
│ │ ├── firestore_service.dart // CRUD operations for Cloud Firestore
│ │ ├── firebase_storage_service.dart // Manages video uploads and downloads via Firebase Storage
│ │ └── messaging_service.dart // Handles push notifications with Firebase Cloud Messaging
│ ├── widgets/ // Reusable UI components across the app
│ │ ├── auth_form.dart // Renders the authentication form for login and sign-up
│ │ ├── auth_buttons.dart // Contains common buttons (submit, toggle, Google sign-in, forgot password)
│ │ ├── auth_fields.dart // Standardized input fields for authentication (email and password)
│ │ ├── auth_snackbars.dart // Custom snackbars for authentication messages
│ │ ├── video_viewing/ // Video viewing screen components
│ │ │ ├── video_background.dart // Video playback area (currently a placeholder)
│ │ │ ├── top_search_button.dart // Search button in the top-right corner
│ │ │ ├── right_actions_column.dart // Vertical column of interaction buttons
│ │ │ ├── creator_info_group.dart // Creator's information and follow button
│ │ │ └── custom_bottom_navigation_bar.dart // Bottom navigation with upload and profile
│ │ ├── email_verification_banner.dart // Banner prompting email verification
│ │ ├── profile_card.dart // Displays user's profile information
│ │ ├── video_card.dart // Widget to display video information on feed (for future use)
│ │ ├── video_interaction.dart // Groups interactive video buttons (for future use)
│ │ └── common_button.dart // Standardized button widget for consistent styling
│ ├── firebase_options.dart // Firebase configuration options generated by the FlutterFire CLI
│ └── main.dart // Application entry point; initializes Firebase and sets up routing (with AuthWrapper)
├── docs/ // Documentation and guiding resources
│ ├── architecture.md // This file – an overview of our application structure
│ ├── feature_inventory.md // Inventory of built and planned features
│ └── development_guidelines.md // Coding standards, integration guidelines, and best practices
├── pubspec.yaml // Flutter dependency configuration
└── README.md // Project overview, setup instructions, and more


## Architectural Patterns

- **State Management:**  
  We use Provider to manage application state in a predictable way across widgets and screens.

- **Service Layer:**  
  All Firebase integrations (Authentication, Firestore, Storage, Messaging) are encapsulated in service classes inside `lib/services/`. This ensures that interactions with external systems are abstracted and maintainable.

- **Reusable Widgets:**  
  Shared UI components are organized in `lib/widgets/` to avoid code duplication and maintain consistency:
  - Authentication widgets at the root level (to be organized into auth/ directory)
  - Video viewing components in `widgets/video_viewing/`
  - Common components at the root of `widgets/`

- **Navigation & Routing:**  
  We use Flutter's Navigator for screen transitions. The `AuthWrapper` in `main.dart` handles the main authentication flow:
  - Unauthenticated users see the `LoginScreen`
  - Authenticated users see the `FrontPage` (video viewing screen)

- **Coding Practices & Conventions:**  
  Adhering to Dart's style guidelines and our defined nomenclature in [docs/development_guidelines.md](docs/development_guidelines.md), we use clear naming conventions (PascalCase for classes, camelCase for variables and functions, underscores for file names) and enforce modularity with a clean separation between UI, business logic, and data models.

- **Dependency Management:**  
  Wherever applicable, we use the singleton pattern (e.g., in AuthService) and dependency injection techniques to ensure a clean and maintainable codebase.

- **Clean Architecture:**  
  Our codebase aims to separate concerns by organizing code into models, screens, services, and widgets. This enables scalability and easier testing of individual components.

---

This architecture file reflects our current codebase within the `/lib` directory. As new features and modules are added, please update this document accordingly to maintain an accurate overview of the project structure.